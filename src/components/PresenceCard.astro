---
interface Props {
  name: string;
  icon: string;
  url: string;
  color: string;
  action: string;
  count: string;
}

const { name, icon, url, color, action, count } = Astro.props;
const isMonochrome = color === '#000000' || color === '#333333';
const isYouTube = name === 'YouTube';
const subscribeUrl = isYouTube ? `${url}?sub_confirmation=1` : url;
const Tag = isYouTube ? 'div' : 'a';

// Icon mask styles - always include background color
const iconMaskStyle = `
  -webkit-mask-image: url(/${icon});
  mask-image: url(/${icon});
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  background-color: ${isMonochrome ? '#6b7280' : color};
`;
---

<Tag
  href={isYouTube ? undefined : url}
  class="card shadow-md hover:shadow-xl transition-all duration-300 group"
  style={`background-color: ${color}10;`}
  target={isYouTube ? undefined : "_blank"}
  rel={isYouTube ? undefined : "noopener noreferrer"}
>
  <div class="card-body p-3 desktop:p-5 items-start text-left aspect-square justify-between">
    <div class="flex flex-col items-start gap-2 desktop:gap-3 w-full">
      <div 
        class="w-7 h-7 desktop:w-12 desktop:h-12 transition-all duration-300 opacity-60 group-hover:opacity-100"
        style={iconMaskStyle} 
      />
      <h3 class="text-sm desktop:text-base font-medium text-base-content/70">{name}</h3>
    </div>
    {isYouTube && (
      <div class="w-full flex justify-start">
        <a 
          href={subscribeUrl}
          class="btn btn-xs desktop:btn-sm text-white border-0"
          style="background-color: #ff0000cc;"
          target="_blank"
          rel="noopener noreferrer"
        >
          <span class="font-bold">{action}</span>
        </a>
      </div>
    )}
  </div>
</Tag>
